//////////////////////////////////////////////////////////////////////
// Bootstrap
//////////////////////////////////////////////////////////////////////

@import "../../node_modules/bootstrap-sass/assets/stylesheets/bootstrap";

//////////////////////////////////////////////////////////////////////
// Font-Awesome 4.
//////////////////////////////////////////////////////////////////////

$fa-font-path: "../";

@import "../../node_modules/font-awesome/scss/font-awesome";

// Replace Bootstrap's glyphicons by Font Awesome.
.glyphicon {
  @extend .fa;
}

//////////////////////////////////////////////////////////////////////
// Angular Charts.
//////////////////////////////////////////////////////////////////////

@import "../../dist/bower_components/angular-chart.js/dist/angular-chart";

//////////////////////////////////////////////////////////////////////
// Angular xEditable.
//////////////////////////////////////////////////////////////////////

@import "../../dist/bower_components/angular-xeditable/dist/css/xeditable";

//////////////////////////////////////////////////////////////////////
// Angular Notify Toaster.
//////////////////////////////////////////////////////////////////////

@import "../../dist/bower_components/angular-notify-toaster/toaster";

//////////////////////////////////////////////////////////////////////
// UI Select.
//////////////////////////////////////////////////////////////////////

@import "../../dist/bower_components/angular-ui-select/dist/select";

//////////////////////////////////////////////////////////////////////
// Fonts MFizz (Linux icons...)
//////////////////////////////////////////////////////////////////////

@import "../../font-mfizz-2.0/font-mfizz";

//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
// Misc
//////////////////////////////////////////////////////////////////////

// Style applied to a message for outdated browsers (IE <= 7).
.browsehappy {
  margin: 0.2em 0;
  background: #cccccc;
  color: black;
  padding: 0.2em 0;
}

// To avoid strange checkbox behaviours on small devices with bootstrap
@media (max-width: 767px) {
.checkbox input[type="checkbox"] {
    position: relative !important;
    margin-left: 0px;
  }
}

// Some links are used throught JavaScript and therefore does not have
// a `href` attribute, they should nevertheless have a *pointer*
// cursor.
// Same for all elements with the "ng-click" attribute.
a, [ng-click], [xo-click], [xo-sref] {
  cursor: pointer;
}

// TODO: We want all our form inputs to be styled by Bootstrap.
//input, textarea, select
//  @extend .form-control

// Click-through notifications.
#toast-container {
  pointer-events: none;
}

html, body, .view-main {
  height: 100%
}

// Force our content to be under the fixed navbar.
.view-main {
  padding-top: 50px;
}

.grid-xs, .grid {
  display: flex;
}

@media (min-width: 768px) {
  .grid-sm {
    display: flex;
  }
}

@media (min-width: 992px) {
  .grid-md {
    display: flex;
  }
}

@media (min-width: 1200px) {
  .grid-lg {
    display: flex;
  }
}

/* With gutters */
.grid--gutters {
}

.grid--gutters > .grid-cell {
  padding-left: 0.1em;
  padding-bottom: 0.1em;
}

.grid-cell {
  flex: 1;
}

.bg-muted {
  background-color: $gray-lighter;
}

//////////////////////////////////////////////////////////////////////

// TODO: The styles in this file should be
// - commented;
// - converted to SASS;
// - move into this file.
@import "to-clean";

//////////////////////////////////////////////////////////////////////
// Colors
//////////////////////////////////////////////////////////////////////

////
// Power states
////

.xo-color-running {
  @extend .text-success;
}

.xo-color-halted {
  @extend .text-danger;
}

.xo-color-paused, .xo-color-suspended {
  @extend .text-info;
}

.xo-color-unknown {
  @extend .text-muted;
}

.xo-color-pending {
  @extend .text-warning;
}

//////////////////////////////////////////////////////////////////////
// Drag and drop
//////////////////////////////////////////////////////////////////////

.xo-dragged td{
  background-color: #ddd;
}

.xo-drop-legit.vm-cell, .xo-drop-target.vm-cell {
  outline-style: dashed;
  outline-width: medium;
  outline-color: #aaa;
}

//////////////////////////////////////////////////////////////////////
// XO icons
//////////////////////////////////////////////////////////////////////

////
// Panel titles
////

.panel-title > i {
  color: #e25440 !important;
}

////
// Alerts
////

.xo-icon-info {
  @extend .fa;
  @extend .fa-exclamation-circle;
  @extend .text-muted;
}

.xo-icon-docker {
  @extend .fa;
  @extend .fa-ship;
  @extend .text-info;
}

.xo-icon-warning {
  @extend .fa;
  @extend .fa-exclamation-circle;
  @extend .text-warning;
}

.xo-icon-error {
  @extend .fa;
  @extend .fa-exclamation-circle;
  @extend .text-danger;
}

.xo-icon-failure {
  @extend .fa;
  @extend .fa-times-circle;
  @extend .text-danger;
}

.xo-icon-success {
  @extend .fa;
  @extend .fa-check-circle;
  @extend .text-success;
}

////
// Objects
////

.xo-icon-console {
  @extend .fa;
  @extend .fa-terminal;
}

.xo-icon-pool {
  @extend .fa;
  @extend .fa-cloud;
}

.xo-icon-host {
  @extend .fa;
  @extend .fa-server;
}

.xo-icon-vm {
  @extend .fa;
  @extend .fa-desktop;
}

.xo-icon-memory {
  @extend .fa;
  @extend .fa-sliders;
}

.xo-icon-cpu {
  @extend .fa;
  @extend .fa-dashboard;
}

.xo-icon-network {
  @extend .fa;
  @extend .fa-sitemap;
}

.xo-icon-sr {
  @extend .fa;
  @extend .fa-hdd-o;
}

.xo-icon-disk {
  @extend .fa;
  @extend .fa-hdd-o;
}

.xo-icon-snapshot {
  @extend .fa;
  @extend .fa-camera;
}

.xo-icon-task {
  @extend .fa;
  @extend .fa-tasks;
}

.xo-icon-stats {
  @extend .fa;
  @extend .fa-line-chart;
}

.xo-icon-user {
  @extend .fa;
  @extend .fa-user;
}

.xo-icon-group {
  @extend .fa;
  @extend .fa-users;
}

.xo-icon-plugin {
  @extend .fa;
  @extend .fa-puzzle-piece;
}

////
// Power states
////

.xo-icon-running {
  @extend .fa;
  @extend .fa-circle;
  @extend .xo-color-running;
}

.xo-icon-halted {
  @extend .fa;
  @extend .fa-circle;
  @extend .xo-color-halted;
}

.xo-icon-suspended {
  @extend .fa;
  @extend .fa-circle;
  @extend .xo-color-paused;
}

.xo-icon-paused {
  @extend .fa;
  @extend .fa-circle;
  @extend .xo-color-paused;
}

.xo-icon-unknown {
  @extend .fa;
  @extend .fa-circle;
  @extend .xo-color-unknown;
}

// if current operation
.xo-icon-working {
  @extend .fa;
  @extend .fa-circle;
  @extend .text-warning;
}

////
// Others.
////

.xo-icon-cpu-low {
  @extend .xo-icon-cpu;
  @extend .text-success;
}

.xo-icon-cpu-medium {
  @extend .xo-icon-cpu;
  @extend .text-warning;
}

.xo-icon-cpu-high {
  @extend .xo-icon-cpu;
  @extend .text-danger;
}

.xo-icon-loading {
  @extend .fa;
  @extend .fa-circle-o-notch;
  @extend .fa-spin;
  @extend .fa-2x;
}

.xo-icon-loading-sm {
  @extend .fa;
  @extend .fa-circle-o-notch;
  @extend .fa-spin;
}

////
// Guest OS
////

.icon-linux {
  @extend .fa;
  @extend .fa-linux;
  color: #666666;
}

.icon-windows {
  @extend .fa;
  @extend .fa-windows;
  color: #666666;
}

.icon-other {
  @extend .fa;
  @extend .fa-question-circle;
  color: #666666;
}

//////////////////////////////////////////////////////////////////////
// Navbar
//////////////////////////////////////////////////////////////////////

// The login form
.login-form {
  padding: 1em;
  width: 20em;
  // small space between fields
  .input-group {
    margin: 0.2em;
  }
  // adapt button for the global theme (dark/blue/grey)
  .input-group-addon {
    background-color: #3a87ad;
    color: #f8f8f8;
    border: 0;
  }
  button {
    margin-top: 1em;
  }
  // adapt form for the global theme
  .form-control {
    background-color: #666666;
    color: #f8f8f8;
    border: 0;
  }
}

// background dark for the whole form
.login-form-dark {
  @extend .login-form;
  background-color: #2e3133;
}

//////////////////////////////////////////////////////////////////////
// Main view
//////////////////////////////////////////////////////////////////////

// FIXME: Class names are too generic and styles might be applied to
// other views as well, all styles should be namespaced (e.g.
// `.view-main`).

// Notice messages in place of the VMs list in the main page.
.vms-notice {
  @extend .text-center;
  @extend .text-muted;
  font-size: 1.5em;
  flex: 1;
  align-self: center;
  justify-content: center;
}

.quick-buttons {
  display: inline;
  float: right;
  opacity: 0;
  a {
    color: #666666;
    margin: 0 0.3em;
    text-decoration: none;
    &:hover {
      color: black;
    }
  }
}

// Quick actions buttons are only visible when over their row.
tr:hover .quick-buttons {
  opacity: 1;
}

// remove icon/button in last row on a table
.quick-remove {
  display: inline;
  float: right;
  opacity: 0;
  a {
    color: #666666;
    text-decoration: none;
    &:hover {
      color: black;
    }
  }
}

// remove only visible when over its row
tr:hover .quick-remove {
  opacity: 1;
}

// edit icon/button in a panel title
.quick-edit {
  display: inline;
  float: right;
  opacity: 1;
  color: #666666;
  &:hover {
    color: black;
  }
}

// Substats (less important host stats)
.substats {
  opacity: 0;
}

// Substat displayed on hover
div.host-cell:hover .substats {
  opacity: 1;
}

// Default SRs (where a new VM will be created).
.default-sr {
  @extend .text-primary;
  font-weight: bold;
}

.tree-panel {
  background-color: white;
  margin-bottom: 0.5em;
  margin-right: 0.5em;
  border-radius: 3px;
}

.host-cell, .pool-cell, .vm-cell {
  @extend .tree-panel;
  & div {
    position: relative;
  }
}

// Prevents a host name from overflowing outside its box.
.host-name, .pool-name, .sr-name {
  display: inline-block;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: 80%;
  overflow: hidden;
}

// Pool block
// A block display a whole pool
.pool-block {
  margin-right: -1.1em;
  margin-left: -0.9em;
}

.pool-cell {
  min-height: 6em;
  flex: 1 1 20% !important;
  max-width: 190px;
}

/* row for all hosts/vms in a pool */
.hosts-vms-cells {
  flex: 1 1 80% !important;
  min-height: 6em;
}

@media (max-width: 767px) {
  /* individual host element */
  .host-cell {
    flex: 1 1 40% !important;
    max-width: 156px;
  }

  .vm-cell {
    flex: 1 1 60% !important;
  }
}

@media (min-width: 768px) {
  /* individual host element */
  .host-cell {
    flex: 1 1 20% !important;
    max-width: 156px;
  }

  .vm-cell {
    flex: 1 1 80% !important;
  }
}

/* vm name in table */
.vm {
  display: inline;
  font-size: 10pt;
   margin: 0;
 }
.no-vm {
  font-size: 1.5em;
  margin-top: 1.8em;
  color: #999;
}
.vm-cell table {
  margin: 0;
}
.vm-cell td {
  border-bottom: 1px solid #edece4 !important;
  border-top: 0px !important;
  text-overflow: ellipsis;
  white-space: nowrap;
}


//////////////////////////////////////////////////////////////////////
// Pool view
//////////////////////////////////////////////////////////////////////

// Allow progress bar in small spaces, like tables
.progress-condensed {
  @extend .progress;
  margin-bottom: 0;
}

//////////////////////////////////////////////////////////////////////
// Host view
//////////////////////////////////////////////////////////////////////

// Memory progress bar stacked for host
.progress-bar-host {
  @extend .progress-bar;
  border-right: 1px solid white;
}

// Memory progress bar stacked for VM
.progress-bar-vm {
  @extend .progress-bar-success;
  border-right: 1px solid white;
}

// Hover color for progress bar
.progress-bar:hover {
  background-color: #e25440;
}

.stat-simple {
  margin-top: 1em;
}

//////////////////////////////////////////////////////////////////////
// General object view
//////////////////////////////////////////////////////////////////////

.panel {
  flex: 1;
  margin: 0.4em;
}

.panel-heading {
  text-align: center;
  font-variant: small-caps;
  font-size: 1.3em;
  font-weight: bold;
}

.panel-body-stats {
  @extend .panel-body;
  padding: 5px;
}

.chart-stat-preview {
  max-height: 8em;
  text-align: center;
  border-left: 1px solid #ddd;
  border-right: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
}

.chart-stat-full {
  max-height: 16em;
  text-align: center;
}

.page-title {
  text-align: center;
  font-size: 2em;
  margin: 0;
}

// display a big number for panel stats
.big-stat {
  font-size: 5em;
  color: #666;
}

// not so big stats
.mid-stat {
  font-size: 2.5em;
  color: #666;
}


//////////////////////////////////////////////////////////////////////
// Flat view
//////////////////////////////////////////////////////////////////////

@media (min-width: 768px) {
  .flat-cell-name {min-width: 7.8%; max-width: 7.8%;}
  .flat-cell-description {min-width: 13%; max-width: 13%}
}

.flat-object {@extend .panel;}
.flat-object:hover {background-color: #f8f8f8;}
.flat-cell {margin-left: 1em; margin-right: 1em; margin-top: 0.5em; margin-bottom: 0.5em;}
.flat-cell-name {font-weight: bold;}
.flat-cell-description {}
.flat-cell-type {max-width: 40px; font-size: 2em; text-align: center; margin: auto; margin-left: 0.5em;}
.flat-cell-tag {font-size: 11pt; margin: auto; min-height: 2.5em; padding-top: 0.4em; padding-left: 1em; opacity: 0.8;}

//////////////////////////////////////////////////////////////////////
// Login view
//////////////////////////////////////////////////////////////////////

.row-login {
  @extend .panel;
  background: #fff;
  margin-top: 4em;
  //padding: 20px 50px 20px 50px;
  padding: 1em 5em 1em 5em;
  max-width: 35em;
  margin-left: auto;
  margin-right: auto;
}

@media (max-width: 768px) {
  .row-login {margin-top: 0.5em; padding: 0em 1em 0em 1em;}
}

img.navbar-logo {
  margin-top: -0.2em;
  display: inline;
  margin-right: 0.5em;
}

.navbar-brand {
  font-variant: small-caps;
  padding-top: 0.8em;
}

//////////////////////////////////////////////////////////////////////
// Side Menus
//////////////////////////////////////////////////////////////////////

.menu-grid {
  display: flex;
  min-height: 100%
}

.side-menu {
  background-color: #242628;
  border-right: 1px solid #eee;
  flex: 1 0 content;
}

.side-menu li a {
  font-size: 1em;
  padding-left: 2em;
  display: block;
  color: #f8f8f8;
  &:hover, &:focus {
    background-color: #2e3133;
  }
  white-space: nowrap;
}

// smaller settings menu on smaller screen
@media (max-width: 992px) {
  .side-menu {
    // 2em of padding + 2.29em of fa-fw
    width: 3.29em;
  }
  .side-menu li a {
    padding-left: 1em;
    padding-right: 1em;
  }
  .menu-entry {
    display: none
  }
}

.side-content {
  flex: 1 1 1em;
}

.fa-menu {
  margin-right: 1.5em;
}

//////////////////////////////////////////////////////////////////////
// Object view
//////////////////////////////////////////////////////////////////////

// For table with only one line, e.g Docker list table etc
.oneliner {
  text-overflow: ellipsis;
  white-space: nowrap;
}

//////////////////////////////////////////////////////////////////////
// Tag directive view
//////////////////////////////////////////////////////////////////////

.tag-zone {
  display: inline-block;
}

.tag-zone .label {
  display: inline-block;
}

.tag-zone form {
  display: inline-block;
}

.tag-zone .add-button {
  display: none;
}

.tag-zone .edit {
  display: inline;
}

.tag-zone:hover .add-button {
  display: inline;
}

tr:hover .tag-zone .add-button {
  display: inline;
}

dd:hover .tag-zone .add-button {
  display: inline;
}

.flat-cell-tag:hover .tag-zone .add-button {
  display: inline;
}


//////////////////////////////////////////////////////////////////////
// Dataviz > chart selector
//////////////////////////////////////////////////////////////////////
.chart-selector{
  position:relative;
  height:120px;
  display:inline-block;
  margin:1em;
  cursor: pointer;
}

.chart-selector > div {
  position:absolute;
  top:0;
  background-color: rgba(255,255,255,0.85);
  border: 1px solid #ddd;
  width:100%;
  font-size:1.5em;
}

.chart-selector.selected img{
  border-width: 3px;
}
.chart-selector.selected > div{
  background-color: rgba(51,51,51,0.85);
  color:white;
}
.chart-selector:hover > div{
  background-color: rgba(255,255,255,1);
}

.chart-selector.selected:hover  > div{
  background-color: rgba(51,51,51,1);
  color:white;
}
